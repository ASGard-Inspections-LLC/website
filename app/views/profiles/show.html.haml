#profile-page
  .header
    .lo-container
      -if user_signed_in? && current_user == @profile.user
        =link_to [:edit, :my, :profile], remote: true, class: "pure-button edit-button" do
          %i.fa.fa-cogs
          Edit Public Profile
      %h1 #{@profile.display_name}'s Profile
      .h1-subtitle This is a showcase of some of the solutions that #{@profile.user.name} has submitted on Exercism.

  .lo-container
    .pure-g
      .pure-u-6-24.lhs
        .sidebar
          =image_tag @profile.user.avatar_url, class: 'avatar'
          .name= @profile.user.name
          -if @profile.user.bio.present?
            .bio= @profile.user.bio
          .hr

          %h3 On Exercism
          .badges
            -if @profile.user.admin?
              .badge.admin Exercism Admin
            -@profile.user.mentored_tracks.each do |track|
              .badge.mentor #{track.title} Mentor
            -@profile.user.maintained_tracks.each do |track|
              .badge.maintainer #{track.title} Maintainer
          .member-since
            %i.fa.fa-fw.fa-calendar
            Since #{@profile.user.created_at.strftime("%b %Y")}

          -if @helped_count > 0
            .helped-count
              %i.fa.fa-fw.fa-handshake-o
              Helped
              .count #{@helped_count}
              = "student".pluralize(@helped_count)
          .hr
          %h3 Elsewhere on the web

          -if @profile.website.present?
            =link_to @profile.website, target: "_blank", class: 'external-link' do
              %i.fa.fa-fw.fa-globe
              %span My Website

          -if @profile.github.present?
            =link_to "https://github.com/#{@profile.github}", target: "_blank", class: 'external-link' do
              %i.fa.fa-fw.fa-github
              %span GitHub

          -if @profile.twitter.present?
            =link_to "https://twitter.com/#{@profile.twitter}", target: "_blank", class: 'external-link' do
              %i.fa.fa-fw.fa-twitter
              %span Twitter

          -if @profile.linkedin.present?
            =link_to @profile.linkedin, target: "_blank", class: 'external-link' do
              %i.fa.fa-fw.fa-linkedin
              %span LinkedIn

          -if @profile.medium.present?
            =link_to "https://medium.com/#{@profile.medium}", target: "_blank", class: 'external-link' do
              %i.fa.fa-fw.fa-medium
              %span Medium

      .pure-u-18-24.rhs
        .num-solutions Showing #{pluralize @solutions.size, "solution"}
        .filters
          .widget-filter
            .title Language:
            =select_tag :language, options_for_select(@tracks.map{|l|[l.title, l.id]}, value: @track), id: nil
        .solutions.pure-g
          -@solutions.each do |solution|
            -exercise = solution.exercise
            .pure-u-1-2
              =link_to [exercise.track, exercise, solution], class: 'solution' do
                .icon
                  .img{style: "background-image:url('#{image_path(exercise.white_icon_url)}')"}
                .title-bar
                  .title= exercise.title
                  .track #{exercise.track.title} Track
                .reactions
                  .reaction
                    %i.fa.fa-fw.fa-thumbs-up
                    .count= @reaction_counts[[solution.id, "like"]].to_i
                  .reaction.highlight
                    %i.fa.fa-fw.fa-heart
                    .count= @reaction_counts[[solution.id, "love"]].to_i
                  .reaction
                    =image_tag "genius.png"
                    .count= @reaction_counts[[solution.id, "genius"]].to_i
                  .reaction
                    %i.fa.fa-fw.fa-comment
                    .count= @comment_counts[solution.id].to_i
